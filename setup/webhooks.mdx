---
title: "Webhooks"
description: "Real-time event notifications and system integrations through HTTP callbacks"
icon: "webhook"
---

# üîó Webhooks

Webhooks enable real-time communication between AI Sync and external systems by sending HTTP POST requests when specific events occur in your system.

## üéØ Overview

Webhooks provide instant notifications about important events in your AI Sync system, allowing you to build powerful integrations and automated workflows.

![Webhook Overview](/images/setup/webhooks/overview.png)

<CardGroup cols={2}>
  <Card title="Real-time Notifications" icon="bell">
    Receive instant updates when events occur in your system
  </Card>
  <Card title="External Integrations" icon="link">
    Connect with CRMs, databases, and third-party applications
  </Card>
  <Card title="Automated Workflows" icon="bolt">
    Trigger actions in external systems based on AI Sync events
  </Card>
  <Card title="Data Synchronization" icon="sync">
    Keep external systems in sync with your AI Sync data
  </Card>
</CardGroup>

## üîÑ Webhook Workflow

<Steps>
  <Step title="Event Occurs">
    An action happens in AI Sync (call ends, agent responds, etc.)
  </Step>
  <Step title="Webhook Triggered">
    System identifies configured webhooks for the event type
  </Step>
  <Step title="HTTP Request Sent">
    POST request with event data sent to your endpoint URL
  </Step>
  <Step title="Response Processed">
    Your system processes the data and sends acknowledgment
  </Step>
  <Step title="Retry Logic">
    Failed requests are retried with exponential backoff
  </Step>
</Steps>

## üìã Webhook Management

Navigate to **Setup > Webhooks** to manage your webhook configurations.

![Webhook Management](/images/setup/webhooks/endpoints.png)

### Webhook Table Overview

| Column | Description | Example |
|--------|-------------|---------|
| **#** | Sequential webhook ID | `1`, `2`, `3` |
| **Title** | Webhook name/identifier | `CRM Integration`, `Analytics Sync` |
| **Hits** | Total number of webhook calls | `1,247` |
| **Last Hit** | Most recent webhook execution | `2025-01-15 14:30:25` |
| **Created At** | Webhook creation timestamp | `2025-01-10 10:40 PM` |
| **Action** | Management options | Edit, Delete, View Endpoints |

### Quick Actions

<CardGroup cols={3}>
  <Card title="Add New Webhook" icon="plus">
    Create new webhook endpoints for your integrations
  </Card>
  <Card title="Edit Configuration" icon="pencil">
    Modify existing webhook settings and URLs
  </Card>
  <Card title="View Endpoints" icon="eye">
    Monitor webhook performance and delivery status
  </Card>
</CardGroup>

## üéõÔ∏è Webhook Configuration

### Creating a New Webhook

<Steps>
  <Step title="Click Add Webhook">
    Navigate to Setup > Webhooks and click the "Add" button
  </Step>
  <Step title="Configure Basic Settings">
    - **Title**: Descriptive name for the webhook
    - **URL**: Your endpoint URL to receive webhook data
    - **Method**: HTTP method (typically POST)
  </Step>
  <Step title="Select Event Types">
    Choose which events should trigger this webhook
  </Step>
  <Step title="Configure Authentication">
    Set up security headers and authentication tokens
  </Step>
  <Step title="Test and Activate">
    Test the webhook and activate it for live events
  </Step>
</Steps>

![Webhook Configuration](/images/setup/webhooks/edits.png)

### Authentication & Security

<AccordionGroup>
  <Accordion title="API Key Authentication">
    ```http
    Authorization: Bearer your-api-key-here
    X-API-Key: your-secret-key
    ```
  </Accordion>
  
  <Accordion title="Signature Verification">
    ```javascript
    // Verify webhook signature
    const signature = req.headers['x-webhook-signature'];
    const payload = JSON.stringify(req.body);
    const expectedSignature = crypto
      .createHmac('sha256', webhookSecret)
      .update(payload)
      .digest('hex');
    ```
  </Accordion>
  
  <Accordion title="IP Whitelisting">
    **AI Sync Webhook IPs:**
    - `192.168.1.100`
    - `192.168.1.101`
    - `192.168.1.102`
  </Accordion>
</AccordionGroup>

## üé™ Available Webhook Events

### üìû Call Events

<CardGroup cols={2}>
  <Card title="Call Started" icon="phone">
    **Event**: `call.started`
    
    **Triggered**: When a call begins
    
    **Use Cases**: Call logging, real-time monitoring
  </Card>
  <Card title="Call Ended" icon="phone-slash">
    **Event**: `call.ended`
    
    **Triggered**: When a call completes
    
    **Use Cases**: Call analytics, CRM updates
  </Card>
  <Card title="Call Answered" icon="phone-volume">
    **Event**: `call.answered`
    
    **Triggered**: When a call is answered
    
    **Use Cases**: Connection tracking, response rates
  </Card>
  <Card title="Call Transferred" icon="phone-arrow-right">
    **Event**: `call.transferred`
    
    **Triggered**: When a call is transferred
    
    **Use Cases**: Transfer logging, agent routing
  </Card>
</CardGroup>

### ü§ñ Agent Events

<CardGroup cols={2}>
  <Card title="Agent Created" icon="robot">
    **Event**: `agent.created`
    
    **Triggered**: When a new AI agent is created
    
    **Use Cases**: Inventory management, provisioning
  </Card>
  <Card title="Agent Updated" icon="gear">
    **Event**: `agent.updated`
    
    **Triggered**: When agent configuration changes
    
    **Use Cases**: Configuration sync, audit trails
  </Card>
  <Card title="Agent Status Changed" icon="toggle-on">
    **Event**: `agent.status_changed`
    
    **Triggered**: When agent goes online/offline
    
    **Use Cases**: Availability tracking, monitoring
  </Card>
  <Card title="Agent Performance" icon="chart-line">
    **Event**: `agent.performance`
    
    **Triggered**: Performance threshold events
    
    **Use Cases**: Quality monitoring, alerts
  </Card>
</CardGroup>

### üìä Campaign Events

<CardGroup cols={2}>
  <Card title="Campaign Started" icon="play">
    **Event**: `campaign.started`
    
    **Triggered**: When a campaign begins
    
    **Use Cases**: Campaign tracking, notifications
  </Card>
  <Card title="Campaign Completed" icon="circle-check">
    **Event**: `campaign.completed`
    
    **Triggered**: When a campaign finishes
    
    **Use Cases**: Results processing, reporting
  </Card>
  <Card title="Lead Generated" icon="user-plus">
    **Event**: `lead.generated`
    
    **Triggered**: When a new lead is created
    
    **Use Cases**: CRM integration, lead routing
  </Card>
  <Card title="Appointment Scheduled" icon="calendar-plus">
    **Event**: `appointment.scheduled`
    
    **Triggered**: When an appointment is booked
    
    **Use Cases**: Calendar sync, confirmations
  </Card>
</CardGroup>

### üí¨ SMS Events
<CardGroup cols={2}>
  <Card title="SMS Sent" icon="paper-plane">
    **Event**: `sms.sent`
    
    **Triggered**: When an SMS is delivered
    
    **Use Cases**: Delivery tracking, billing
  </Card>
  <Card title="SMS Received" icon="inbox">
    **Event**: `sms.received`
    
    **Triggered**: When an SMS is received
    
    **Use Cases**: Response handling, conversations
  </Card>
  <Card title="SMS Failed" icon="circle-x">
    **Event**: `sms.failed`
    
    **Triggered**: When SMS delivery fails
    
    **Use Cases**: Error handling, retry logic
  </Card>
  <Card title="SMS Replied" icon="reply">
    **Event**: `sms.replied`
    
    **Triggered**: When recipient replies to SMS
    
    **Use Cases**: Conversation tracking, engagement
  </Card>
</CardGroup>

## üì¶ Webhook Payload Structure

### Standard Payload Format

All webhooks follow a consistent JSON structure:

```json
{
  "event": "call.ended",
  "timestamp": "2025-01-15T14:30:25.123Z",
  "webhook_id": "wh_123456789",
  "data": {
    // Event-specific data
  },
  "metadata": {
    "version": "1.0",
    "signature": "sha256=abc123..."
  }
}
```

### Call Event Payload Example

```json
{
  "event": "call.ended",
  "timestamp": "2025-01-15T14:30:25.123Z",
  "webhook_id": "wh_123456789",
  "data": {
    "call_id": "call_987654321",
    "agent_id": "agent_abc123",
    "caller_number": "+1234567890",
    "called_number": "+0987654321",
    "call_duration": 180,
    "call_status": "completed",
    "call_direction": "outbound",
    "recording_url": "https://recordings.ai-sync.com/call_987654321.mp3",
    "transcription": "Hello, this is John calling about...",
    "sentiment": "positive",
    "disposition": "interested",
    "tags": ["qualified", "follow-up"],
    "custom_fields": {
      "lead_score": 85,
      "next_action": "schedule_demo"
    }
  },
  "metadata": {
    "version": "1.0",
    "signature": "sha256=abc123def456..."
  }
}
```

 

## üîí Security Best Practices

### Webhook Verification

<AccordionGroup>
  <Accordion title="Signature Verification">
    Always verify webhook signatures to ensure authenticity:
    
    ```javascript
    const crypto = require('crypto');
    
    function verifyWebhookSignature(payload, signature, secret) {
      const expectedSignature = crypto
        .createHmac('sha256', secret)
        .update(payload)
        .digest('hex');
      
      return crypto.timingSafeEqual(
        Buffer.from(signature, 'hex'),
        Buffer.from(expectedSignature, 'hex')
      );
    }
    
    // Middleware to verify webhooks
    app.use('/webhook/*', (req, res, next) => {
      const signature = req.headers['x-webhook-signature'];
      const payload = JSON.stringify(req.body);
      
      if (!verifyWebhookSignature(payload, signature, WEBHOOK_SECRET)) {
        return res.status(401).json({ error: 'Invalid signature' });
      }
      
      next();
    });
    ```
  </Accordion>
  
  <Accordion title="Rate Limiting">
    Implement rate limiting to prevent abuse:
    
    ```javascript
    const rateLimit = require('express-rate-limit');
    
    const webhookLimiter = rateLimit({
      windowMs: 15 * 60 * 1000, // 15 minutes
      max: 1000, // Limit each IP to 1000 requests per windowMs
      message: 'Too many webhook requests'
    });
    
    app.use('/webhook', webhookLimiter);
    ```
  </Accordion>
  
  <Accordion title="HTTPS Only">
    Always use HTTPS endpoints for webhook URLs:
    
    ```javascript
    // ‚úÖ Correct - HTTPS endpoint
    const webhookUrl = 'https://api.yoursite.com/webhook/ai-sync';
    
    // ‚ùå Incorrect - HTTP endpoint (insecure)
    const webhookUrl = 'http://api.yoursite.com/webhook/ai-sync';
    ```
  </Accordion>
</AccordionGroup>

### Error Handling

<AccordionGroup>
  <Accordion title="Retry Logic">
    AI Sync implements exponential backoff for failed webhooks:
    
    - **Attempt 1**: Immediate
    - **Attempt 2**: 30 seconds delay
    - **Attempt 3**: 2 minutes delay
    - **Attempt 4**: 8 minutes delay
    - **Attempt 5**: 32 minutes delay
    - **Final**: Webhook marked as failed after 5 attempts
  </Accordion>
  
  <Accordion title="Response Codes">
    Return appropriate HTTP status codes:
    
    ```javascript
    app.post('/webhook', (req, res) => {
      try {
        // Process webhook data
        processWebhookData(req.body);
        
        // Success response
        res.status(200).json({ 
          received: true,
          timestamp: new Date().toISOString()
        });
      } catch (error) {
        // Log error for debugging
        console.error('Webhook processing error:', error);
        
        // Return error status
        res.status(500).json({ 
          error: 'Internal processing error',
          message: error.message
        });
      }
    });
    ```
  </Accordion>
</AccordionGroup>

## üìä Monitoring & Debugging

### Webhook Logs

Monitor webhook delivery and performance:

<CardGroup cols={2}>
  <Card title="Delivery Status" icon="circle-check">
    - Success/failure rates
    - Response times
    - Error codes and messages
    - Retry attempts
  </Card>
  <Card title="Performance Metrics" icon="chart-bar">
    - Average response time
    - Peak load handling
    - Throughput statistics
    - Error rate trends
  </Card>
</CardGroup>

### Testing Webhooks

<AccordionGroup>
  <Accordion title="Test Endpoint">
    Use tools like ngrok for local testing:
    
    ```bash
    # Install ngrok
    npm install -g ngrok
    
    # Start your local server
    node webhook-server.js
    
    # Expose local server
    ngrok http 3000
    
    # Use the HTTPS URL for webhook configuration
    # https://abc123.ngrok.io/webhook
    ```
  </Accordion>
  
  <Accordion title="Mock Payloads">
    Test with sample webhook payloads:
    
    ```bash
    curl -X POST https://your-webhook-url.com/webhook \
      -H "Content-Type: application/json" \
      -H "X-Webhook-Signature: sha256=test-signature" \
      -d '{
        "event": "call.ended",
        "timestamp": "2025-01-15T14:30:25.123Z",
        "data": {
          "call_id": "test_call_123",
          "call_duration": 120,
          "sentiment": "positive"
        }
      }'
    ```
  </Accordion>
</AccordionGroup>

